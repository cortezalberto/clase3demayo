<!DOCTYPE html>
<html>

<%- include('partials/head') %>

    <body>

        <%- include('partials/header') %>


            <section class="banner">
                <img src="/images/img-home-banner.jpg" alt="Banner de ofertas">
            </section>


            <main>
                <h3>Edici√≥n de Producto</h3>
                <section class="ultima-visita">
                    <form action="/products/<%= locals.product && product.id %>?_method=PUT" method="POST" enctype="multipart/form-data">
                   

                      <% if ( locals.product && product.id ) { %>
                        
                        <p>
                            <%= product.id %>
                         
                        </p>
                      
                        <% } %>

                     
                      
                         
                   
           
                        <% if (locals.erroresControlados ) { %>



                            <% for( let i in erroresControlados ) { %>

                                <p>
                                    <%= erroresControlados[i].msg %>
                                </p>

                                <% } %>


                                    <% } %>



                                        <div class="field">
                                            <label for="name">Nombres</label>
                                            <div class="control">

                                                <input type="text" name="name"
                                                   
                                                value="<%= locals.camposDevueltos ? camposDevueltos.name  : product.name %>">
                                            </div>

                                            <div class="danger">
                                                <!--   cuidado con el If -->

                                                <% if (locals.erroresControlados && erroresControlados.name) { %>
                                                    <p>
                                                        <%= erroresControlados.name.msg %>
                                                    </p>
                                                    <% } %>

                                            </div>

                                        </div>


                                        <div class="field">
                                            <label for="image">Imagen</label>
                                            <div class="control">

                                                <input type="file" name="image">
                                                <input type="hidden" name="oldImage"
                                                value="<%= locals.product ? product.image : '0' %>">
                                              
                                                   </div>
                                        </div>

                                        <div class="field">
                                            <label for="price">Precio</label>
                                            <div class="control">
                                                <input type="text" name="price"
                                                 
                                                 value="<%= locals.camposDevueltos ? camposDevueltos.price  : product.price %>">
                                     
                                                </div>
 
                                            <div class="danger">
                                                <!--   cuidado con el If -->

                                                <% if (locals.erroresControlados && erroresControlados.price) { %>
                                                    <p>
                                                        <%= erroresControlados.price.msg %>
                                                    </p>
                                                    <% } %>

                                            </div>
                                        </div>

                                        <div class="field">
                                            <label for="descuento">descuento</label>
                                            <div class="control">

                                                <input type="text" name="descuento" 
                        
                                                value="<%= locals.camposDevueltos ? camposDevueltos.descuento : product.descuento %>">
                                            </div>

                                            <div class="danger">
                                                <!--   cuidado con el If -->

                                                <% if (locals.erroresControlados && erroresControlados.descuento) { %>
                                                    <p>
                                                        <%= erroresControlados.descuento.msg %>
                                                    </p>
                                                    <% } %>

                                            </div>
                                        </div>





                                        <div class="field">
                                            <div class="control">
                                                <button type="submit">Editar Producto</button>
                                            </div>
                                        </div>
                    </form>
                </section>


            </main>
            <%- include('partials/footer') %>


    </body>

</html>